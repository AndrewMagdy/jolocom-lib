

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; Jolocom-Lib  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Single Sign On (SSO) with Jolocom" href="ssoSetUp.html" />
    <link rel="prev" title="Getting Started" href="gettingStarted.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Jolocom-Lib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Where to go next?</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingStarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-self-sovereign-identity">Create a Self Sovereign Identity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-an-identity">Create an Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialize-identitywallet-class">Initialize IdentityWallet Class</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#credentials-signed-credentials">Credentials &amp; Signed Credentials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-credential">Create a Credential</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-signed-credential">Create a Signed Credential</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validate-a-signed-credential">Validate a Signed Credential</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manage-your-public-profile">Manage Your Public Profile</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add">Add</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete">Delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get">Get</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#credential-based-communication-flows">Credential Based Communication Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-signed-credential-request">Create a Signed Credential Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#consume-a-signed-credential-request">Consume a Signed Credential Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-signed-credential-response">Create a Signed Credential Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#consume-a-signed-credential-response">Consume a Signed Credential Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#interactions-with-other-identities">Interactions With Other Identities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ssoSetUp.html">Single Sign On (SSO) with Jolocom</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocolComponents.html">Protocol Components</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Jolocom-Lib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>This section provides an overview of possible usage patterns that the Jolocom Protocol enables.</p>
<div class="section" id="create-a-self-sovereign-identity">
<h2>Create a Self Sovereign Identity<a class="headerlink" href="#create-a-self-sovereign-identity" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-an-identity">
<h3>Create an Identity<a class="headerlink" href="#create-an-identity" title="Permalink to this headline">¶</a></h3>
<p>First create an Identity Manager. The Identity Manager is initialized with <code class="docutils literal notranslate"><span class="pre">seed</span></code> which is of type <em>Buffer</em>. The seed
represents entropy from which the master key is derived.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">indetityManager</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">identityManager</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span>
</pre></div>
</div>
<p>Now you can use the <code class="docutils literal notranslate"><span class="pre">identityManager</span></code> to derive child keys. For a self sovereign identity
we need to derive at least two keys. The first one is the identity key which is used for signing.
The second one is an ethereum key which is used for registering the identity on the ethereum
blockchain.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">identityKey</span> <span class="o">=</span> <span class="nx">identityManager</span><span class="p">.</span><span class="nx">deriveChildKey</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">deriveChildKey</span></code> on <code class="docutils literal notranslate"><span class="pre">identityManager</span></code> is called with <code class="docutils literal notranslate"><span class="pre">path</span></code>. Path is of type <em>string</em>
and indicates along which ‘path’ a child key is derived from the master key. The jolocom lib provides
default key paths which should be used during the creation process. You can use them like so:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="nx">identityManager</span><span class="p">.</span><span class="nx">getSchema</span><span class="p">()</span>


<span class="kr">const</span> <span class="nx">identityKey</span> <span class="o">=</span> <span class="nx">identityManager</span><span class="p">.</span><span class="nx">deriveChildKey</span><span class="p">(</span><span class="nx">schema</span><span class="p">.</span><span class="nx">jolocomIdentityKey</span><span class="p">)</span>


<span class="kr">const</span> <span class="nx">ethereumKey</span> <span class="o">=</span> <span class="nx">identityManager</span><span class="p">.</span><span class="nx">deriveChildKey</span><span class="p">(</span><span class="nx">schema</span><span class="p">.</span><span class="nx">ethereumKey</span><span class="p">)</span>
</pre></div>
</div>
<p>Up till now you have created a master key and child keys needed for a self sovereign identity.
The next step shows how to create your actual identity and register it on ethereum so that it can be used.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">registry</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">jolocom</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">ipfsConnector</span><span class="p">,</span> <span class="nx">ethereumConnector</span><span class="p">})</span>
</pre></div>
</div>
<p>At the moment the jolocom registry needs to be initialized with an IPFS connector and an Ethereum connector.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This will change to be initialized with default params in near future.</p>
</div>
<p>Now you can use the <code class="docutils literal notranslate"><span class="pre">registry</span></code> to trigger the last step of identity creation and registration.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">identityWallet</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">registry</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">privateIdentityKey</span><span class="p">,</span> <span class="nx">privateEthereumKey</span><span class="p">})</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">create</span></code> method on registry is asynchronous and is called with the two private keys created with the help of identity manager.</p>
<p>The returned identityWallet class gives you signing capabilities and access to your identity details.</p>
</div>
<div class="section" id="initialize-identitywallet-class">
<h3>Initialize IdentityWallet Class<a class="headerlink" href="#initialize-identitywallet-class" title="Permalink to this headline">¶</a></h3>
<p>In case you already created an identity with the jolocom lib you can initialize the IdentityWallet class
by creating a registry and calling the <code class="docutils literal notranslate"><span class="pre">authenticate</span></code> method on it with the jolocomIdentity private key.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">registry</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">jolocom</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">ipfsConnector</span><span class="p">,</span> <span class="nx">ethereumConnector</span><span class="p">})</span>

<span class="kr">const</span> <span class="nx">identityWallet</span> <span class="o">=</span> <span class="nx">registry</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="nx">privateIdentityKey</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="credentials-signed-credentials">
<h2>Credentials &amp; Signed Credentials<a class="headerlink" href="#credentials-signed-credentials" title="Permalink to this headline">¶</a></h2>
<p>Credentials and Signed Credentials are a way to attach information to a DID. Signed credentials
give you the benefit to express cryptographically verifiable information - so that the consumer of this
signed credentials is able to resolve information about the issuer plus establish validity of the signature.</p>
<div class="section" id="create-a-credential">
<h3>Create a Credential<a class="headerlink" href="#create-a-credential" title="Permalink to this headline">¶</a></h3>
<p>There are two ways to create a credential with jolocom lib. One way is to use the IdentityWallet class
for it. However, since a credential has no signature, it can also be created direcly on JolocomLib without access
to a private key.</p>
<p><strong>Create a Credential with IdentityWallet</strong></p>
<p>First, initialize the IdentityWallet class as outlined above. Then create the credential.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">credential</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">credential</span><span class="p">({</span><span class="nx">metadata</span><span class="p">,</span> <span class="nx">claim</span><span class="p">})</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">create.credential</span></code> method is called with <code class="docutils literal notranslate"><span class="pre">metadata</span></code> and <code class="docutils literal notranslate"><span class="pre">claim</span></code>.
You can make use of default metadata specifics which are provided with the jolocom library.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently jolocom lib provides default metadata for name, public profile,
email address, name, and mobile phone number. Please check the specific section on credential
under Protocol Components for more information.</p>
</div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">claimsMetadata</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;jolocom-lib&#39;</span>


<span class="kr">const</span> <span class="nx">emailMetadata</span> <span class="o">=</span> <span class="nx">claimsMetadata</span><span class="p">.</span><span class="nx">emailAddress</span>
</pre></div>
</div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myClaim</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;did:jolo:5dcbd50085819b40b93efc4f13fb002119534e9374274b10edce88df8cb311af&#39;</span>

  <span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;hello@jolocom.com&#39;</span>

<span class="p">}</span>


<span class="kr">const</span> <span class="nx">credential</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">credential</span><span class="p">({</span>

  <span class="nx">metadata</span>: <span class="kt">emailMetadata</span><span class="p">,</span>

  <span class="nx">claim</span>: <span class="kt">myClaim</span>

<span class="p">})</span>
</pre></div>
</div>
<p>The returned credential is a class which exposes several methods, like <code class="docutils literal notranslate"><span class="pre">credential.getType()</span></code> which
in our example above would return an <em>Array</em> that looks like this:</p>
<blockquote>
<div>[‘Credential’, ‘ProofOfEmailCredential’]</div></blockquote>
<p><strong>Create a Credential directly with JolocomLib</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">JolocomLib</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;jolocom-lib&#39;</span>

<span class="kr">const</span> <span class="nx">credetial</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">unsigned</span><span class="p">.</span><span class="nx">createCredential</span><span class="p">({</span><span class="nx">metadata</span><span class="p">,</span> <span class="nx">claim</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-signed-credential">
<h3>Create a Signed Credential<a class="headerlink" href="#create-a-signed-credential" title="Permalink to this headline">¶</a></h3>
<p>A signed credential can be created via two ways. You can either create a signed credential
from scratch or sign an already created or received credential.</p>
<p><strong>Create a Signed Credential</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">signedCred</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">signedCredential</span><span class="p">({</span><span class="nx">metadata</span><span class="p">,</span> <span class="nx">claim</span><span class="p">})</span>
</pre></div>
</div>
<p><strong>Create a Signed Credential from an existing Credential</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">signedCred</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">sign</span><span class="p">.</span><span class="nx">credential</span><span class="p">(</span><span class="nx">Credential</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sign.credential</span></code> method is called with class <em>Credential</em> as input param.</p>
</div>
<div class="section" id="validate-a-signed-credential">
<h3>Validate a Signed Credential<a class="headerlink" href="#validate-a-signed-credential" title="Permalink to this headline">¶</a></h3>
<p>We have two ways to validate the signature of a signed credential.</p>
<p>In case you know the public key of the signing party before starting the signature validation,
you can use the following way. Note that the <code class="docutils literal notranslate"><span class="pre">validateSignatureWithPublicKey</span></code> is called on the instance
of SignedCredential class.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">valid</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">signedCred</span><span class="p">.</span><span class="nx">validateSignatureWithPublicKey</span><span class="p">(</span><span class="nx">pubKey</span><span class="p">)</span>
</pre></div>
</div>
<p>The alternative way is to call <code class="docutils literal notranslate"><span class="pre">validateSignature</span></code> on the instance of SignedCredential class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please note that passing the registry as param will be replaced by a default registry soon.</p>
</div>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">registry</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">jolocom</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">ipfsConnector</span><span class="p">,</span> <span class="nx">ethereumConnector</span><span class="p">})</span>

<span class="kr">const</span> <span class="nx">valid</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">signedCred</span><span class="p">.</span><span class="nx">validateSignature</span><span class="p">(</span><span class="nx">registry</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="manage-your-public-profile">
<h2>Manage Your Public Profile<a class="headerlink" href="#manage-your-public-profile" title="Permalink to this headline">¶</a></h2>
<p>You can attach a public profile to a signing key so that parties who interact with this identity are able to
resolve more information about you. This is especially relevant for online services as the public profile would be
the first point of contact between two identities.</p>
<p>Before you start, initialize the IdentityWallet class as outlined in first section.</p>
<div class="section" id="add">
<h3>Add<a class="headerlink" href="#add" title="Permalink to this headline">¶</a></h3>
<p>Get the default metadata from the jolocom lib.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">claimsMetadata</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;jolocom-lib&#39;</span>


<span class="kr">const</span> <span class="nx">pubProfileMetadata</span> <span class="o">=</span> <span class="nx">claimsMetadata</span><span class="p">.</span><span class="nx">publicProfile</span>
</pre></div>
</div>
<p>The default metadata for public profile looks as follows and requires at least
<code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">about</span></code> fields to be filled out. You can also add <code class="docutils literal notranslate"><span class="pre">image</span></code> and <code class="docutils literal notranslate"><span class="pre">url</span></code>.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span>  <span class="nx">publicProfile</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">fieldNames</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;about&#39;</span><span class="p">],</span>
    <span class="nx">optionalFieldNames</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">],</span>
    <span class="nx">type</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Credential&#39;</span><span class="p">,</span> <span class="s1">&#39;PublicProfileCredential&#39;</span><span class="p">],</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Public Profile&#39;</span><span class="p">,</span>
    <span class="nx">context</span><span class="o">:</span> <span class="p">[</span>
      <span class="s1">&#39;https://w3id.org/identity/v1&#39;</span><span class="p">,</span>
      <span class="s1">&#39;https://identity.jolocom.com/terms&#39;</span><span class="p">,</span>
      <span class="s1">&#39;https://w3id.org/security/v1&#39;</span><span class="p">,</span>
      <span class="s1">&#39;https://w3id.org/credentials/v1&#39;</span><span class="p">,</span>
      <span class="s1">&#39;http://schema.org&#39;</span>
    <span class="p">]</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>Your public profile is essentially a signed credential which is associated with
your DID. Create the signed credential.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myDID</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">getIdentity</span><span class="p">().</span><span class="nx">getDID</span><span class="p">()</span>

<span class="kr">const</span> <span class="nx">myPublicProfile</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">id</span>: <span class="kt">myDID</span><span class="p">,</span>

  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jolocom&#39;</span><span class="p">,</span>

  <span class="nx">about</span><span class="o">:</span> <span class="s1">&#39;We enable a global identity system&#39;</span>

<span class="p">}</span>


<span class="kr">const</span> <span class="nx">publicProfileCred</span> <span class="o">=</span> <span class="nx">idnentityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">signedCredential</span><span class="p">({</span>

  <span class="nx">metadata</span>: <span class="kt">publicProfileMetadata</span><span class="p">,</span>

  <span class="nx">claim</span>: <span class="kt">myPublicProfile</span>

<span class="p">})</span>
</pre></div>
</div>
<p>Now add the created public profile to your identity.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">identityWallet</span><span class="p">.</span><span class="nx">identity</span><span class="p">.</span><span class="nx">publicProfile</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">publicProfileCred</span><span class="p">)</span>
</pre></div>
</div>
<p>Up till now you have made the changes to your identity locally.
Now you can commit the changes to ipfs and ethereum.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">await</span> <span class="nx">registry</span><span class="p">.</span><span class="nx">commit</span><span class="p">({</span><span class="nx">wallet</span>: <span class="kt">identityWallet</span><span class="p">,</span> <span class="nx">ethereumPrivateKey</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="update">
<h3>Update<a class="headerlink" href="#update" title="Permalink to this headline">¶</a></h3>
<p>The update functionality is very similar to the add functionality.
The only difference is that on add it throws an error if a public profile already exists.</p>
</div>
<div class="section" id="delete">
<h3>Delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h3>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">identityWallet</span><span class="p">.</span><span class="nx">identity</span><span class="p">.</span><span class="nx">publicProfile</span><span class="p">.</span><span class="k">delete</span><span class="p">()</span>


<span class="nx">await</span> <span class="nx">registry</span><span class="p">.</span><span class="nx">commit</span><span class="p">({</span><span class="nx">wallet</span>: <span class="kt">identityWallet</span><span class="p">,</span> <span class="nx">ethereumPrivateKey</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="get">
<h3>Get<a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h3>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">publicProfile</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">identity</span><span class="p">.</span><span class="nx">publicProfile</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p></p>
</div>
<div class="section" id="credential-based-communication-flows">
<h2>Credential Based Communication Flows<a class="headerlink" href="#credential-based-communication-flows" title="Permalink to this headline">¶</a></h2>
<p>Below you will find the credential based interactions enabled by the Jolocom protocol.
Creation and consumption examples show the interaction patterns between identities.</p>
<div class="section" id="create-a-signed-credential-request">
<h3>Create a Signed Credential Request<a class="headerlink" href="#create-a-signed-credential-request" title="Permalink to this headline">¶</a></h3>
<p>We have two ways to create a signed credential request.</p>
<p><strong>Create Signed Credential Request from Credential Request</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">credRequest</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">credentialRequest</span><span class="p">({</span><span class="nx">callbackURL</span><span class="p">,</span> <span class="nx">credentialRequirements</span><span class="p">})</span>

<span class="kr">const</span> <span class="nx">signedCredReq</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">signedCredentialRequest</span><span class="p">(</span><span class="nx">credRequest</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Create a Signed Credential Request by signing a Credential Request</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">credRequest</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">credentialRequest</span><span class="p">({</span><span class="nx">callbackURL</span><span class="p">,</span> <span class="nx">credentialRequirements</span><span class="p">})</span>

<span class="kr">const</span> <span class="nx">signedCredReq</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">sign</span><span class="p">.</span><span class="nx">credentialRequest</span><span class="p">(</span><span class="nx">credRequest</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="consume-a-signed-credential-request">
<h3>Consume a Signed Credential Request<a class="headerlink" href="#consume-a-signed-credential-request" title="Permalink to this headline">¶</a></h3>
<p>First, use the parse functionality of jolocom lib to transform received data into respective class instance.
We have two ways to send a signed reponse - as json or as a JWT. Use the parser accordingly.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// JSON case</span>
<span class="kr">const</span> <span class="nx">signedCredReq</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">parse</span><span class="p">.</span><span class="nx">signedCredentialRequest</span><span class="p">.</span><span class="nx">fromJSON</span><span class="p">(</span><span class="nx">receivedSignedCredReq</span><span class="p">)</span>

<span class="c1">// JWT case</span>
<span class="kr">const</span> <span class="nx">signedCredReq</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">parse</span><span class="p">.</span><span class="nx">signedCredentialRequest</span><span class="p">.</span><span class="nx">fromJWT</span><span class="p">(</span><span class="nx">receivedSignedCredReq</span><span class="p">)</span>
</pre></div>
</div>
<p>TODO: finish this flow documentation.</p>
</div>
<div class="section" id="create-a-signed-credential-response">
<h3>Create a Signed Credential Response<a class="headerlink" href="#create-a-signed-credential-response" title="Permalink to this headline">¶</a></h3>
<p>Coming soon.</p>
</div>
<div class="section" id="consume-a-signed-credential-response">
<h3>Consume a Signed Credential Response<a class="headerlink" href="#consume-a-signed-credential-response" title="Permalink to this headline">¶</a></h3>
<p>First, use the parse functionality of jolocom lib to transform received data into respective class instance.
We have two ways to send a signed reponse - as json or as a JWT. Use the parser accordingly.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// JSON case</span>
<span class="kr">const</span> <span class="nx">signedCredResp</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">parse</span><span class="p">.</span><span class="nx">signedCredentialResponse</span><span class="p">.</span><span class="nx">fromJSON</span><span class="p">(</span><span class="nx">receivedSignedCredResp</span><span class="p">)</span>

<span class="c1">// JWT case</span>
<span class="kr">const</span> <span class="nx">signedCredResp</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">parse</span><span class="p">.</span><span class="nx">signedCredentialResponse</span><span class="p">.</span><span class="nx">fromJWT</span><span class="p">(</span><span class="nx">receivedSignedCredResp</span><span class="p">)</span>
</pre></div>
</div>
<p>Now you can use the methods provided by <code class="docutils literal notranslate"><span class="pre">SignedCredentialResponse</span></code> class.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// credential request you send</span>

<span class="kr">const</span> <span class="nx">credRequest</span> <span class="o">=</span> <span class="nx">identityWallet</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">credentialRequest</span><span class="p">({</span><span class="nx">callbackURL</span><span class="p">,</span> <span class="nx">credentialRequirements</span><span class="p">})</span>



<span class="kr">const</span> <span class="nx">registry</span> <span class="o">=</span> <span class="nx">JolocomLib</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">jolocom</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">ipfsConnector</span><span class="p">,</span> <span class="nx">ethereumConnector</span><span class="p">})</span>

<span class="kr">const</span> <span class="nx">validSignature</span> <span class="o">=</span> <span class="nx">signedCredResp</span><span class="p">.</span><span class="nx">validateSignature</span><span class="p">(</span><span class="nx">registry</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">satisfiesRequest</span> <span class="o">=</span> <span class="nx">signedCredResp</span><span class="p">.</span><span class="nx">satisfiesRequest</span><span class="p">(</span><span class="nx">credRequest</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">receivedCreds</span> <span class="o">=</span> <span class="nx">signedCredResp</span><span class="p">.</span><span class="nx">getSuppliedCredentials</span><span class="p">()</span>


<span class="c1">// example for check of supplied signed credential</span>

<span class="kr">const</span> <span class="nx">validCred</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">receivedCreds</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">validateSignature</span><span class="p">(</span><span class="nx">registry</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="interactions-with-other-identities">
<h2>Interactions With Other Identities<a class="headerlink" href="#interactions-with-other-identities" title="Permalink to this headline">¶</a></h2>
<p>Coming soon.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ssoSetUp.html" class="btn btn-neutral float-right" title="Single Sign On (SSO) with Jolocom" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gettingStarted.html" class="btn btn-neutral" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Jolocom.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>